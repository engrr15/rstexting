<style type="text/css">
.jquery-notific8-container{
    z-index: 9999100 !important;
}
</style>
<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<!--[if lt IE 9]>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/respond.min.js"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/excanvas.min.js"></script> 
<![endif]-->
<link rel="stylesheet" href="<?= base_url() ?>notif8/jquery.notific8.css" media="screen">
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/flot/jquery.flot.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/flot/jquery.flot.resize.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/flot/jquery.flot.categories.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery.pulsate.min.js" type="text/javascript"></script>

<script type="text/javascript" src="<?php echo base_url() ?>themes/backend/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
<script type="text/javascript" src="<?php echo base_url() ?>themes/backend/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script>
<script type="text/javascript" src="<?php echo base_url() ?>themes/backend/assets/global/plugins/clockface/js/clockface.js"></script>

<script type="text/javascript" src="<?php echo base_url() ?>themes/backend/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="<?php echo base_url() ?>themes/backend/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"></script>
<!-- IMPORTANT! fullcalendar depends on jquery-ui.min.js for drag & drop support -->
<!--<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>-->
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery-easypiechart/jquery.easypiechart.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery.sparkline.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="<?php echo base_url() ?>themes/backend/assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/layout/scripts/quick-sidebar.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/layout/scripts/demo.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/pages/scripts/index.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/pages/scripts/tasks.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/bootbox/bootbox.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/pages/scripts/ui-alert-dialog-api.js"></script>
<!--<script src="<?php //echo base_url() ?>themes/backend/assets/admin/scripts/cms_page.js" type="text/javascript"></script>-->
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/bootstrap-modal/js/bootstrap-modalmanager.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/bootstrap-modal/js/bootstrap-modal.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/plugins/jquery-nestable/jquery.nestable.js"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="<?php echo base_url() ?>themes/backend/assets/admin/pages/scripts/ui-nestable.js"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/layout/scripts/quick-sidebar.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/layout/scripts/demo.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/pages/scripts/table-managed.js"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/pages/scripts/ui-extended-modals.js"></script>
<script src="<?php echo base_url() ?>themes/backend/assets/admin/pages/scripts/components-pickers.js"></script>
<script src="<?php echo base_url() ?>webnotification/WebNotifications.js"></script>
<script type="text/javascript" src="<?= base_url() ?>notif8/jquery.notific8.js"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<script>
    var full_url = '<?php echo admin_url(''); ?>';
jQuery(document).ready(function() {    
   Metronic.init(); // init metronic core componets
   Layout.init(); // init layout
   QuickSidebar.init(); // init quick sidebar
Demo.init(); // init demo features
UINestable.init();
UIAlertDialogApi.init();
TableManaged.init(); 
ComponentsPickers.init();
});

</script>
<script type="text/javascript">
    
    Notification.requestPermission().then(function(result) {
        console.log(result);
        if (result === 'denied') {
            console.log('Permission wasn\'t granted. Allow a retry.');
            return;
        }
        if (result === 'default') {
            console.log('The permission request was dismissed.');
            return;
        }
        // Do something with the granted permission.
    });
    function showNotification() {
        if (WebNotifications.areSupported()){
            if (WebNotifications.currentPermission() === WebNotifications.permissions.granted) {
                //handle different events
                //setTimeout( Notify, 5000 );
                //setInterval(Notify, 5000)
                Notify();
            }
        }
    }
    
    function Notify(){
        var notif = WebNotifications.new('RSS Texting notification ', '<?php if(isset($_REQUEST['msg'])){echo $_REQUEST['msg'];}?> # <?php if(isset($_REQUEST['mobileno'])){echo $_REQUEST['mobileno'];}?>', 'http://resource4u.biz/dev/osborn-automotive/webnotification/campusmvp-icon.png', null, null);
                //handle different events
                
                notif.addEventListener("show", Notification_OnEvent);
                notif.addEventListener("click", Notification_OnEvent);
                notif.addEventListener("close", Notification_OnEvent);
                
    }

    function Notification_OnEvent(event) {
        //A reference to the Notification object
        //var notif = event.currentTarget;
        //document.getElementById("msgs").innerHTML += "<br>Notification <strong>'" + notif.title + "'</strong> received event '" + event.type + "' at " + new Date().toLocaleString();
    }
    var audio;
    setInterval(function() {
        $.ajax({
            type: "POST",
            cache: false,
            url: '<?php echo admin_url('home/webNotificationAlert');?>',
            dataType: "json",
            success: function(res) {
                if(res.status == 'yes'){
                    var notif = WebNotifications.new(res.title, res.message, '<?= base_url() ?>themes/backend/assets/admin/layout4/img/RepairShopSolutions-Logo.png', null, 15000);
                    //handle different events

                    notif.addEventListener("show", Notification_OnEvent);
                    notif.addEventListener("click", Notification_OnEvent);
                    notif.addEventListener("close", Notification_OnEvent);

                    audio = new Audio('<?= base_url() ?>uploads/door_bell.mp3');
                    audio.loop = false;
                    audio.play();

                    $.notific8(res.message, {life: 15000, heading: res.title, theme : 'teal', horizontalEdge : 'right', verticalEdge : 'top'});
                }
            }
        });
    }, 10000);
</script>